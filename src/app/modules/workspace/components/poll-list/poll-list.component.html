<div class="tab-title">
    <h1>Polls</h1>
    <!-- Button Toggle between Table/Grid -->
    <mat-button-toggle-group class="view-toggle-group" value="table" #viewToggle="matButtonToggleGroup">
        <mat-button-toggle value="table">
            <mat-icon>view_list</mat-icon>Table
        </mat-button-toggle>
        <mat-button-toggle value="grid">
            <mat-icon>view_module</mat-icon>Grid
        </mat-button-toggle>
    </mat-button-toggle-group>
    <button class="add-button" *ngIf="can_add_polls" mat-flat-button color="primary" (click)="createPoll()">New Poll</button>
</div>

@if (pollList) {
<app-grid-or-table-view [filterPlaceholder]="'Filter Policies'" 
                        [viewMode]="viewToggle.value" 
                        [list]="pollList"
                        [optionsMenu]="optionsMenu"
                        [cardClickAction]="viewPoll.bind(this)"
                        [rowClickAction]="viewPoll.bind(this)" 
                        [displayedColumns]="displayedColumns">

    <!-- Card Title -->
    <ng-template #cardTitle let-item>
        <div style="display: flex; justify-content: space-between;">
            <div><span>{{item.name}}</span></div>
            <div>
                <mat-chip highlighted>{{item.public ? 'public': 'private'}}</mat-chip>
        <mat-chip highlighted>{{item.published ? 'published': 'draft'}} </mat-chip>
            </div>
        </div>
    </ng-template>

    <!-- Card Content -->
    <ng-template #cardContent let-item>
        {{item.description}}
    </ng-template>

    <!-- Table Columns -->
    <ng-template #tableColumns let-column="column" let-row="row" let-cell="cell">
        @switch (column){
            @case ('questions') {
                {{cell}}
            }
            @case ('published') {
                {{cell ? 'Yes' : 'No'}}
            }
            @case ('public') {
                {{cell ? 'Yes' : 'No'}}
            }
            @default {
                {{cell}}
            }
        }
    </ng-template>
</app-grid-or-table-view>
} @else {
<app-page-loading-spinner [error_message]="'Could not load polls'"
    [loading_message]="'Loading polls'"></app-page-loading-spinner>
}